Схема лабораторного стенда:

![image](https://github.com/verttte/otus-labs/assets/165086553/0e034cf1-356d-435c-af5e-778e9086b2ed)

### Часть 1: Создание сети и настройка основных параметров устройства
Произведены базовые настройки в соответствии с методичкой. В том числе заданы IP-адреса для VLAN 1 на всех коммутаторах.
Проверка связности между коммутаторами:
1. Выполняется эхо-запрос от коммутатора S1 на коммутатор S2
2. Выполняется эхо-запрос от коммутатора S1 на коммутатор S3
3. Выполняется эхо-запрос от коммутатора S2 на коммутатор S3

<details>
  <summary>Результат на снимке экрана под катом</summary>
  
![image](https://github.com/verttte/otus-labs/assets/165086553/51ce0de0-9afc-4e4b-90d6-6d80c01a6c85)
</details>

### Часть 2:	Определение корневого моста
Произведены дополнительные настройки:
1. Отключены все порты
2. Порты подключенные к другим коммутаторам настроены в качестве транковых
3. Включены порты Et0/1 и Et0/3

Далее посредством команды `show spanning-tree` отображаем данные Spanning Tree Protocol.
Видим, что у каждого коммутатора приоритет и VLAN ID одинаковые. Поэтому корневой коммутатор выбирается по самому низкому MAC-адресу. Это коммутатор S1.

![image](https://github.com/verttte/otus-labs/assets/165086553/a1002a6f-fe45-43be-ba2b-becfcf38a917)

Роль и состояние портов на каждом коммутаторе:

S1
```
Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Et0/1               Desg FWD 100       128.2    Shr
Et0/3               Desg FWD 100       128.4    Shr
```

S2
```
Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Et0/1               Desg FWD 100       128.2    Shr
Et0/3               Root FWD 100       128.4    Shr
```

S3
```
Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Et0/1               Root FWD 100       128.2    Shr
Et0/3               Altn BLK 100       128.4    Shr
```

![image](https://github.com/verttte/otus-labs/assets/165086553/cd109a71-258d-49ed-9eb2-424d2c15ccce)

#### Ответы на вопросы из методички

>Какой коммутатор является корневым мостом?

Ответ: S1

>Почему этот коммутатор был выбран протоколом spanning-tree в качестве корневого моста?

Ответ: при одинаковом приоритете и расширенном индетификаторе этот коммутатор имеет самое низкое значение MAC-адреса 

>Какие порты на коммутаторе являются корневыми портами?

Ответ: порты коммутатора, которые имеют кратчайший путь к корневому коммутатору.

>Какие порты на коммутаторе являются назначенными портами?

Ответ: некорневые порты коммутаторов между сегментами сети.

>Какой порт отображается в качестве альтернативного и в настоящее время заблокирован?

Ответ: порт Et0/3 коммутатора S3

>Почему протокол spanning-tree выбрал этот порт в качестве невыделенного (заблокированного) порта?

Ответ: потому что коммутатор имеет самое высокое значение BID на основе MAC-адреса, следовательно самый низкий приоритет в топологии.

### Часть 3:	Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов

Из предыдущей части знаем, что заблокирован порт Et0/3 коммутатора S3.
Уменьшим стоимость порта корневого моста на этом коммутаторе на единицу до 99.

```
S3(config)#interface Et0/1
S3(config-if)#spanning-tree cost 99
```

Видим, что ранее заблокированный порт Et0/3 коммутатора S3 теперь является назначенным.
```
Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Et0/1               Root FWD 99        128.2    Shr
Et0/3               Desg FWD 100       128.4    Shr
```
А протокол Spanning tree блокирует на другом коммутаторе.

S2
```
Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Et0/1               Altn BLK 100       128.2    Shr
Et0/3               Root FWD 100       128.4    Shr
```

Удаляем ранее настроенную стоимость порта. Видим, что протокол STP сбросил порт на коммутаторе, вернув исходные настройки порта.

S3
```
Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Et0/1               Root FWD 100       128.2    Shr
Et0/3               Altn BLK 100       128.4    Shr
```

S2
```
Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Et0/1               Desg FWD 100       128.2    Shr
Et0/3               Root FWD 100       128.4    Shr
```

### Часть 4:	Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов

Включим порты Et0/0 и Et0/2 на всх коммутаторах. Подождем 30 секунд, чтобы протокол STP завершил процесс перевода портов. Затем смотрим вывод команды `show spanning-tree` на некорневых коммутаторах.

S2
```
Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Et0/0               Desg FWD 100       128.1    Shr
Et0/1               Desg FWD 100       128.2    Shr
Et0/2               Root FWD 100       128.3    Shr
Et0/3               Altn BLK 100       128.4    Shr
```

S3
```
Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Et0/0               Root FWD 100       128.1    Shr
Et0/1               Altn BLK 100       128.2    Shr
Et0/2               Altn BLK 100       128.3    Shr
Et0/3               Altn BLK 100       128.4    Shr
```

Корневой порт переместился на порт с меньшим номером, а предыдущий порт заблокирован.

#### Ответы на вопросы из методички

>Какой порт выбран протоколом STP в качестве порта корневого моста на каждом коммутаторе некорневого моста?

Ответ: S2 - Et0/2; S3 - Et0/0

>Почему протокол STP выбрал эти порты в качестве портов корневого моста на этих коммутаторах?

Ответ: основываясь на приоритете порта в связке с его номером - низкие значения являются предпочтительными. На S2 порт сменился с 3 на 2, на S3 - с 1 на 0. 

### Вопросы для повторения

>Какое значение протокол STP использует первым после выбора корневого моста, чтобы определить выбор порта?

Ответ: стоимость портов

>Если первое значение на двух портах одинаково, какое следующее значение будет использовать протокол STP при выборе порта?

Ответ: BID

>Если оба значения на двух портах равны, каким будет следующее значение, которое использует протокол STP при выборе порта?

Ответ: приоритеты портов.
